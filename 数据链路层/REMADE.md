## 数据链路层三大基本问题
### 1. 封装成帧
将**网络层传下来的分组添加首部和尾部**，用于标记帧的开始和结束。<br>

### 2. 透明传输
透明表示一个实际存在的事物看起来好像不存在一样。

帧使用**首部和尾部**进行定界，如果帧的数据部分含有和首部尾部相同的内容，那么帧的开始和结束位置就会被错误的判定。需要在数据部分出现首部尾部相同的内容前面插入转义字符。如果数据部分出现转义字符，那么就在转义字符前面再加个转义字符。在接收端进行处理之后可以还原出原始数据。

### 3. 差错检测
目前数据链路层广泛使用了**循环冗余检验（CRC）**来检查比特差错。

# 信道分类
### 1. 广播信道
**一对多通信**，一个节点发送的数据能够被广播信道上所有的节点接收到。
所有的节点都在同一个广播信道上发送数据，因此需要有专门的控制方法进行协调，避免发生冲突（冲突也叫碰撞）。
主要有两种控制方法进行协调，一个是**使用信道复用技术**，一是**使用 CSMA/CD 协议**。

### 2. 点对点信道
一对一通信。
因为不会发生碰撞，因此也比较简单，使用 PPP 协议进行控制。
# 信道复用技术
### 1. 频分复用
频分复用的所有主机在相同的时间占用不同的频率带宽资源。
### 2. 时分复用
时分复用的所有主机在不同的时间占用相同的频率带宽资源。
使用频分复用和时分复用进行通信，在通信的过程中主机会一直占用一部分信道资源。
### 3. 统计时分复用
是对时分复用的一种改进，不固定每个用户在时分复用帧中的位置，只要有数据就集中起来组成统计时分复用帧然后发送。
### 4. 波分复用
光的频分复用。由于光的频率很高，因此习惯上用波长而不是频率来表示所使用的光载波。

# CSMA/CD 协议
### CSMA/CD 表示载波监听多点接入 / 碰撞检测。<br>

**多点接入** ：说明这是总线型网络，许多主机以多点的方式连接到总线上。<br>
**载波监听** ：每个主机都必须不停地监听信道。在发送前，如果监听到信道正在使用，就必须等待。<br>
**碰撞检测** ：在发送中，如果监听到信道已有其它主机正在发送数据，就表示发生了碰撞。虽然每个主机在发送数据之前都已经监听到信道为空闲，但是由于电磁波的传播时延的存在，还是有可能会发生碰撞。<br>
记端到端的传播时延为 τ，最先发送的站点最多经过 2τ 就可以知道是否发生了碰撞，称 2τ 为 争用期 。只有经过争用期之后还没有检测到碰撞，才能肯定这次发送不会发生碰撞。<br>

当发生碰撞时，站点要停止发送，等待一段时间再发送。这个时间采用 截断二进制指数退避算法 来确定。从离散的整数集合 {0, 1, .., (2k-1)} 中随机取出一个数，记作 r，然后取 r 倍的争用期作为重传等待时间。
## PPP 协议
互联网用户通常需要连接到某个 ISP 之后才能接入到互联网，PPP 协议是用户计算机和 ISP 进行通信时所使用的数据链路层协议。
### PPP 的帧格式：

F 字段为帧的定界符；<br>
A 和 C 字段暂时没有意义；<br>
FCS 字段是使用 CRC 的检验序列；<br>
信息部分的长度不超过 1500;
## MAC 地址
MAC 地址是链路层地址，长度为 6 字节（48 位），用于唯一标识网络适配器（网卡）。

一台主机拥有多少个网络适配器就有多少个 MAC 地址。例如笔记本电脑普遍存在无线网络适配器和有线网络适配器，因此就有两个 MAC 地址。

### 以太网
以太网是一种星型拓扑结构局域网。<br>

【现状】：目前以太网使用交换机替代了集线器，交换机是一种链路层设备，它不会发生碰撞，能根据 MAC 地址进行存储转发。
以太网帧格式：

**类型** ：标记上层使用的协议；<br>
**数据** ：长度在 46-1500 之间，如果太小则需要填充；<br>
**FCS** ：帧检验序列，使用的是 CRC 检验方法；<br>

### 交换机
**交换机**具有自学习能力，学习的是交换表的内容，交换表中存储着 MAC 地址到接口的映射。
### 虚拟局域网
**虚拟局域网**可以建立与物理位置无关的逻辑组，只有在同一个虚拟局域网中的成员才会收到链路层广播信息。
